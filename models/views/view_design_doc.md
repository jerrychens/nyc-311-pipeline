# View 設計說明與使用場景

在本專案中，我們透過 dbt 建立了三個 views，目的在於：
1. 提供乾淨一致的資料介面供上層分析與報表使用
2. 隔離底層 schema 更動對分析端的影響
3. 加速查詢、減少重複邏輯，提高維運效率

---

## 📘 View 說明與設計原因

### 1. `view_complaint_summary`

**來源**：`stg_nyc_311_partitioned`

**目的**：彙總每日各類型 `complaint_type` 的案件數

**設計動機**：
- 讓 BI 工具或資料分析師能快速取用每日投訴類型趨勢
- 加快查詢效率、避免重複寫 group by 邏輯

**範例用途**：
- 分析每日最多投訴的項目
- 結合氣候資料觀察異常變化

---

### 2. `view_complaint_location`

**來源**：`stg_nyc_311_partitioned`

**目的**：將經緯度與類型一併匯出供地圖視覺化

**設計動機**：
- 讓資料科學團隊進行地理分析（如 cluster 分析）
- 結合街區資料進行熱點偵測（hotspot detection）

**範例用途**：
- Tableau / PowerBI 熱點圖
- 警政資源部署建議

---

### 3. `view_complaint_recent`

**來源**：`stg_nyc_311_partitioned`

**目的**：近 7 天的原始案件（含原始欄位）

**設計動機**：
- 供 QA 或運維團隊檢查資料異常
- 對接即時看板需求（如今日件數、過去 7 日件數）

**範例用途**：
- 即時資料稽核
- 異常投訴樣態自動偵測

---

## 🧩 View 與 dbt 整合建議

所有 views 均使用 `dbt config(materialized='view')` 建立，保有：
- 快速部署與更新
- 不佔用實體儲存空間（僅儲存 query 定義）
- 易於 version control，利於 CI/CD 整合

---

## ✅ 總結

建立這些 views 能協助：
- 清楚分層，提升模型可讀性
- 對接不同使用者需求（分析師、開發者、業務端）
- 建立一致性的查詢接口，減少開發時間與人為錯誤

